---
author: murmur wheel
title: 常见面试题整理
---

# Go

## Go 的协程和线程的区别

1. Go 协程的调度是在用户态进行的，效率更高
2. Go 的协程的栈可以动态扩展

## Go 的垃圾回收算法

## Go 协程调度机制

- G 代表协程，每次使用 go 关键字时创建的对象
- M 工作线程，用来执行协程
- P 代表处理器，维护一个协程的执行队列

runtime.GOMAXPROCS 调用的作用，限制全局的最大 processer 数目，一般将其设为 CPU 核数。


# C++

## 什么时候编译器会生成一个 Default Constructor ?

当程序员没有自己声明一个 Default Constructor 时，编译器会根据需要为其生成一个 Default Constructor，这个 constructor 没有什么用处，只是为了存在而存在。通常这个 Default Constructor 以 inline 或者 static 的形式给出，因此如果有多个 .cpp 文件实例化了该类，也不会存在冲突。

## 在 constructor 会做些什么？

# 数据库

## 事务的基本性质

1. 原子性
2. 一致性
3. 隔离性
4. 持久性

简称 ACID

## 隔离性的级别

1. 可串行化
2. 可重复读
3. 已提交读
4. 未提交读

# 消息队列

## 作用

1. 削峰
2. 异步
3. 解耦

## kafka

# 分布式

## CAP 定理

- C 一致性：数据在多个副本之间能够保持一致的特性（严格的一致性）
- A 可用性：系统提供的服务必须出于一直可用的状态，每次请求都能获取到非错的响应（不一定为最新数据）。
- p 分区容错性：分布式系统在遇到网络分区故障时，仍能对外提供满足一致性和可用性的服务，除非整个网络都发生了故障。

一个分布式系统最多只能满足这三者中的两个。

# redis

## 用途

1. 缓存

## redis 基本数据结构

1. 字符串
2. hash
3. list
4. set
5. zset

## redis 主从复制

初次连接时执行全量复制，然后执行增量复制。为了处理网络中断、高延迟等情形，主节点会维持一个增量复制缓冲区，主从节点在数据复制时会比较在这个缓存中的位移从而确保传输的安全性。

## redis 集群怎么扩容

首先加入新的 redis 节点，然后通过命令将其他节点上的部分负载转移到新增节点上。

## redis 怎么实现分布式锁

通过 Lua 脚本实现一个 tryLock 操作：如果 redis 中没有对应的 key，就设置一个 key 并获得锁。如果 redis 中已经存在一个 key，判断脚本执行时的时间 - 设置 key 的时间是否大于超时时间，如果大于超时时间，获得锁并更新锁的时间，否则不能获得锁。

## redis 处理过期节点的策略

1. 定时扫描所有的 key，将过期的节点从数据库中删除
2. 在访问 key 时比较时间，如果过期，将其从 redis 中删除
3. 随机策略，随机抽取库中的 key 来淘汰。

## 单个 redis 和 redis 集群的区别

# linux

## 内存结构

从高到底： 内核，栈，堆，未初始化数据段，已初始化数据段，代码段。

# shell

## 常用命令

1. 字符串：echo, printf, tail
2. 文件系统：ls, cd, mkdir, mv, cp,
3. 磁盘：mount, lsblk
4. 网络：netstat, tcpdump, tc, nc
5. 进程管理：kill, killall, wait, pidof

# 系统设计

## 有一千万个 IP，选出其中重复次数最多的前 K 个 IP

## 秒杀系统
