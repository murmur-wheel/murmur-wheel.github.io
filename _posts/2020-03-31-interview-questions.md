---
author: murmur wheel
title: 常见面试题整理
---

# Go

## Go 的协程和线程的区别

1. Go 协程的调度是在用户态进行的，效率更高
2. Go 的协程的栈可以动态扩展

## Go 的垃圾回收算法

## Go 协程调度机制

- G：调度系统的最基本单位 goroutine，存储了 goroutine 的执行栈信息、goroutine 状态以及 goroutine 的任务函数等。在 G 眼中只有 P，P 就是运行 G 的 "CPU"。
- P：表示逻辑 processer，代表 线程 M 的执行上下文。P 最大的作用就是其拥有各种 G 对象队列、链表、cache 和状态。P 的数量也代表了 golang 的执行并发度，即有多少 goroutine 可以同时运行。P 虽然表示逻辑处理器，但是 P 不执行任何代码，对 G 来说，P 相当于 CPU 核，G 只有绑定 P 才能被调度。对 M 来说，P 提供了相关的执行环境，如内存分配状态，任务队列。
- M：M 代表着真正的执行计算资源，可以认为它就是系统线程。M 是真正调度系统的执行者，每个 M 就像一个勤劳的工作者，总是从各种队列中找到可以运行的 G，而且这样 M 可以同时存在多个。M 在绑定有效的 P 后，进入调度循环，而且 M 并不保留 G 状态，这是 G 可以跨 M 调度的基础。

M 获取和释放 P：

1. 主动释放：当等待 channel 地输入时。 
2. 被动释放：当因系统调用而进入内核态而超时，监控线程会将释放 M 所对应的 P。当 M 从内核态恢复后，G 将会被放入全局 g 队列中。 

## M 怎么偷 P

todo

https://zboya.github.io/post/go_scheduler/

# 数据库

## 什么是存储过程

## 索引是什么？有什么作用以及优缺点？

## 什么是事务？

1. 原子性
2. 一致性
3. 隔离性
4. 持久性

简称 ACID

## 数据库的乐观锁和悲观锁是什么？

## 使用索引查询一定能提高查询的性能么？为什么

## 简单说一说 drop, delete, truncate 的区别

## drop, delete, truncate 分别在什么场景之下使用

## 超键、候选键、主键、外键分别是什么？

## 什么是视图？以及视图的使用场景

## 数据库三范式

1. 1NF：每个属性都不可再分
2. 2NF：消除了非主属性对于码的部分函数依赖
3. 3NF：消除了非主属性对于码的传递函数依赖，如果存在非主属性对于码的传递函数依赖，则不符合 3NF 的要求。

## 隔离性的级别

1. 可串行化
2. 可重复读
3. 已提交读
4. 未提交读

# 消息队列

## 作用

1. 削峰
2. 异步
3. 解耦

## kafka

# 分布式

## CAP 定理

- C 一致性：数据在多个副本之间能够保持一致的特性（严格的一致性）
- A 可用性：系统提供的服务必须出于一直可用的状态，每次请求都能获取到非错的响应（不一定为最新数据）。
- p 分区容错性：分布式系统在遇到网络分区故障时，仍能对外提供满足一致性和可用性的服务，除非整个网络都发生了故障。

一个分布式系统最多只能满足这三者中的两个。

# redis

## 用途

1. 缓存

## redis 基本数据结构

1. 字符串
2. hash
3. list
4. set
5. zset

## redis 主从复制

初次连接时执行全量复制，然后执行增量复制。为了处理网络中断、高延迟等情形，主节点会维持一个增量复制缓冲区，主从节点在数据复制时会比较在这个缓存中的位移从而确保传输的安全性。

## redis 集群怎么扩容

首先加入新的 redis 节点，然后通过命令将其他节点上的部分负载转移到新增节点上。

## redis 怎么实现分布式锁

通过 Lua 脚本实现一个 tryLock 操作：如果 redis 中没有对应的 key，就设置一个 key 并获得锁。如果 redis 中已经存在一个 key，判断脚本执行时的时间 - 设置 key 的时间是否大于超时时间，如果大于超时时间，获得锁并更新锁的时间，否则不能获得锁。

## redis 处理过期节点的策略

1. 定时扫描所有的 key，将过期的节点从数据库中删除
2. 在访问 key 时比较时间，如果过期，将其从 redis 中删除
3. 随机策略，随机抽取库中的 key 来淘汰。

## 单个 redis 和 redis 集群的区别

# linux

## 内存结构

从高到底： 内核，栈，堆，未初始化数据段，已初始化数据段，代码段。

# shell

## 常用命令

1. 字符串：echo, printf, tail
2. 文件系统：ls, cd, mkdir, mv, cp,
3. 磁盘：mount, lsblk
4. 网络：netstat, tcpdump, tc, nc
5. 进程管理：kill, killall, wait, pidof

# 系统设计题

## 有一千万个 IP，选出其中重复次数最多的前 K 个 IP

## 秒杀系统
